## API Report File for "@backstage/plugin-auth-node"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { Entity } from '@backstage/catalog-model';
import { JSONWebKey } from 'jose';
import { Logger as Logger_2 } from 'winston';
import { PluginEndpointDiscovery } from '@backstage/backend-common';

// @public
export interface AnyJWK extends Record<string, string> {
  // (undocumented)
  alg: string;
  // (undocumented)
  kid: string;
  // (undocumented)
  kty: string;
  // (undocumented)
  use: 'sig';
}

// @public
export type AuthResponse<TProviderInfo> = {
  providerInfo: TProviderInfo;
  profile: ProfileInfo;
  backstageIdentity?: BackstageIdentityResponse;
};

// @public @deprecated
export type BackstageIdentity = BackstageSignInResult;

// @public
export interface BackstageIdentityResponse extends BackstageSignInResult {
  identity: BackstageUserIdentity;
}

// @public
export interface BackstageSignInResult {
  // @deprecated
  entity?: Entity;
  // @deprecated
  id: string;
  token: string;
}

// @public
export type BackstageUserIdentity = {
  type: 'user';
  userEntityRef: string;
  ownershipEntityRefs: string[];
};

// @public
export class IdentityClient {
  constructor(options: { discovery: PluginEndpointDiscovery; issuer: string });
  authenticate(token: string | undefined): Promise<BackstageIdentityResponse>;
  static getBearerToken(
    authorizationHeader: string | undefined,
  ): string | undefined;
  listPublicKeys(): Promise<{
    keys: JSONWebKey[];
  }>;
}

// @public
export type KeyStore = {
  addKey(key: AnyJWK): Promise<void>;
  removeKeys(kids: string[]): Promise<void>;
  listKeys(): Promise<{
    items: StoredKey[];
  }>;
};

// @public
export class MemoryKeyStore implements KeyStore {
  // (undocumented)
  addKey(key: AnyJWK): Promise<void>;
  // (undocumented)
  listKeys(): Promise<{
    items: StoredKey[];
  }>;
  // (undocumented)
  removeKeys(kids: string[]): Promise<void>;
}

// @public
export type ProfileInfo = {
  email?: string;
  displayName?: string;
  picture?: string;
};

// @public
export type StoredKey = {
  key: AnyJWK;
  createdAt: Date;
};

// @public
export class TokenFactory implements TokenIssuer {
  constructor(options: TokenFactoryOptions);
  // (undocumented)
  issueToken(params: TokenParams): Promise<string>;
  // (undocumented)
  listPublicKeys(): Promise<{
    keys: AnyJWK[];
  }>;
}

// @public
export interface TokenFactoryOptions {
  issuer: string;
  keyDurationSeconds: number;
  keyStore: KeyStore;
  // (undocumented)
  logger: Logger_2;
}

// @public
export type TokenIssuer = {
  issueToken(params: TokenParams): Promise<string>;
  listPublicKeys(): Promise<{
    keys: AnyJWK[];
  }>;
};

// @public
export type TokenParams = {
  claims: {
    sub: string;
    ent?: string[];
  };
};
```
